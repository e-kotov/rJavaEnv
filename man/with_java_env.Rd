% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/java_scoped.R
\name{with_java_env}
\alias{with_java_env}
\title{Execute code with a specific Java environment}
\usage{
with_java_env(version, code, ...)
}
\arguments{
\item{version}{Integer or character. \strong{Required.} The Java version you need (e.g., 17, 21). Defaults to \code{NULL}, which is invalid and will trigger a validation error; callers should always provide a non-\code{NULL} value explicitly.}

\item{code}{The code to execute with the temporary Java environment.}

\item{...}{Additional arguments passed to \code{local_java_env()}.}
}
\value{
The result of executing \code{code}.
}
\description{
Temporarily sets \code{JAVA_HOME} and \code{PATH} for the duration of the provided
code block, then restores the previous environment.
}
\section{Warning - Not for rJava}{

\strong{Do not use this function if your package depends on rJava.}
See \code{local_java_env()} for details on why rJava is incompatible with scoped Java switching.
}

\examples{
\dontrun{
# Using system2
rJavaEnv::with_java_env(version = 21, {
  system2("java", "-version")
})

# Using processx
rJavaEnv::with_java_env(version = 21, {
  processx::run("java", c("-jar", "tool.jar", "--help"))
})
}
}
