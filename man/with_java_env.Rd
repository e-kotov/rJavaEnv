% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/java_scoped.R
\name{with_java_env}
\alias{with_java_env}
\title{Execute code with a specific Java environment}
\usage{
with_java_env(version, code, ...)
}
\arguments{
\item{version}{Java version specification. Accepts:
\itemize{
\item \strong{Major version} (e.g., \code{21}, \code{17}): Downloads the latest release for that major version.
\item \strong{Specific version} (e.g., \code{"21.0.9"}, \code{"11.0.29"}): Downloads the exact version.
\item \strong{SDKMAN identifier} (e.g., \code{"25.0.1-amzn"}, \code{"24.0.2-open"}): Uses the SDKMAN
backend automatically. When an identifier is detected, the \code{distribution} and \code{backend}
arguments are \strong{ignored} and derived from the identifier. Find available identifiers
in the \code{identifier} column of \code{\link{java_list_available}(backend = "sdkman")}.
}}

\item{code}{The code to execute with the temporary Java environment.}

\item{...}{Additional arguments passed to \code{local_java_env()}.}
}
\value{
The result of executing \code{code}.
}
\description{
Temporarily sets \code{JAVA_HOME} and \code{PATH} for the duration of the provided
code block, then restores the previous environment.
}
\section{Warning - Not for rJava}{

\strong{Do not use this function if your package depends on rJava.}
See \code{local_java_env()} for details on why rJava is incompatible with scoped Java switching.
}

\examples{
\dontrun{
# Using system2
rJavaEnv::with_java_env(version = 21, {
  system2("java", "-version")
})

# Using processx
rJavaEnv::with_java_env(version = 21, {
  processx::run("java", c("-jar", "tool.jar", "--help"))
})
}
}
