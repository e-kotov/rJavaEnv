<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Install specified Java version and set the JAVA_HOME and PATH environment variables in current R session — use_java • rJavaEnv</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Install specified Java version and set the JAVA_HOME and PATH environment variables in current R session — use_java"><meta name="description" content="Using specified Java version, set the JAVA_HOME and PATH environment variables in the current R session. If Java distribtuion has not been downloaded yet, download it. If it was not installed into cache directory yet, install it there and then set the environment variables. This function first checks if the requested version is already present in the rJavaEnv cache. If found, it sets the environment immediately without downloading. If not found, it downloads and unpacks the distribution.
This is intended as a quick and easy way to use different Java versions in R scripts that are in the same project, but require different Java versions. For example, one could use this in scripts that are called by targets package or callr package."><meta property="og:description" content="Using specified Java version, set the JAVA_HOME and PATH environment variables in the current R session. If Java distribtuion has not been downloaded yet, download it. If it was not installed into cache directory yet, install it there and then set the environment variables. This function first checks if the requested version is already present in the rJavaEnv cache. If found, it sets the environment immediately without downloading. If not found, it downloads and unpacks the distribution.
This is intended as a quick and easy way to use different Java versions in R scripts that are in the same project, but require different Java versions. For example, one could use this in scripts that are called by targets package or callr package."><meta property="og:image" content="https://www.ekotov.pro/rJavaEnv/reference/figures/card.png"><meta property="og:image:alt" content="rJavaEnv: Java Environments for R Projects. Install and manage Java environments using R"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@EgorKotov"><meta name="twitter:site" content="@EgorKotov"><!-- counter.dev analytics --><script data-goatcounter="https://jukadipos.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><!-- counter.dev analytics --><script src="https://cdn.counter.dev/script.js" data-id="7e3e8d31-9a84-48b0-a678-a00715236a90" data-utcoffset="1"></script><script>
 (function(h,o,t,j,a,r){
     h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
     h._hjSettings={hjid:3578286,hjsv:6};
     a=o.getElementsByTagName('head')[0];
     r=o.createElement('script');r.async=1;
     r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
     a.appendChild(r);
 })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rJavaEnv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rJavaEnv.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/rJavaEnv-step-by-step.html">Step-by-step: Download, Install, and Setup `Java` for 'R' Projects</a></li>
    <li><a class="dropdown-item" href="../articles/multiple-java-with-targets-callr.html">Multiple `Java` environments in one project with `targets` and `callr`</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>About</h6></li>
    <li><a class="dropdown-item" href="../articles/why-rJavaEnv.html">Why rJavaEnv: the landscape of 'Java'-dependent R packages</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced</h6></li>
    <li><a class="dropdown-item" href="../articles/install-rjava-from-source.html">Install `rJava` from source</a></li>
    <li><a class="dropdown-item" href="../articles/for-developers.html">Using `rJavaEnv` in R Packages</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/e-kotov/rJavaEnv/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Install specified Java version and set the <code>JAVA_HOME</code> and <code>PATH</code> environment variables in current R session</h1>
      <small class="dont-index">Source: <a href="https://github.com/e-kotov/rJavaEnv/blob/main/R/use_java.R" class="external-link"><code>R/use_java.R</code></a></small>
      <div class="d-none name"><code>use_java.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Using specified Java version, set the <code>JAVA_HOME</code> and <code>PATH</code> environment variables in the current R session. If Java distribtuion has not been downloaded yet, download it. If it was not installed into cache directory yet, install it there and then set the environment variables. This function first checks if the requested version is already present in the <code>rJavaEnv</code> cache. If found, it sets the environment immediately without downloading. If not found, it downloads and unpacks the distribution.</p>
<p>This is intended as a quick and easy way to use different Java versions in R scripts that are in the same project, but require different Java versions. For example, one could use this in scripts that are called by <code>targets</code> package or <code>callr</code> package.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">use_java</span><span class="op">(</span></span>
<span>  version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"Corretto"</span>,</span>
<span>  cache_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"rJavaEnv.cache_path"</span><span class="op">)</span>,</span>
<span>  platform <span class="op">=</span> <span class="fu"><a href="platform_detect.html">platform_detect</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">os</span>,</span>
<span>  arch <span class="op">=</span> <span class="fu"><a href="platform_detect.html">platform_detect</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">arch</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ._skip_rjava_check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-version">version<a class="anchor" aria-label="anchor" href="#arg-version"></a></dt>
<dd><p><code>Integer</code> or <code>character</code> vector of length 1 for major version of Java to download or install. If not specified, defaults to the latest LTS version. Can be "8", and "11" to "24" (or the same version numbers in <code>integer</code>) or any newer version if it is available for the selected distribution. For <code>macOS</code> on <code>aarch64</code> architecture (Apple Silicon) certain <code>Java</code> versions are not available.</p></dd>


<dt id="arg-distribution">distribution<a class="anchor" aria-label="anchor" href="#arg-distribution"></a></dt>
<dd><p>The Java distribution to download. If not specified, defaults to "Amazon Corretto". Currently only <a href="https://aws.amazon.com/corretto/" class="external-link">"Amazon Corretto"</a> is supported.</p></dd>


<dt id="arg-cache-path">cache_path<a class="anchor" aria-label="anchor" href="#arg-cache-path"></a></dt>
<dd><p>The destination directory to download the Java distribution to. Defaults to a user-specific data directory.</p></dd>


<dt id="arg-platform">platform<a class="anchor" aria-label="anchor" href="#arg-platform"></a></dt>
<dd><p>The platform for which to download the Java distribution. Defaults to the current platform.</p></dd>


<dt id="arg-arch">arch<a class="anchor" aria-label="anchor" href="#arg-arch"></a></dt>
<dd><p>The architecture for which to download the Java distribution. Defaults to the current architecture.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>A <code>logical</code> value indicating whether to suppress messages. Can be <code>TRUE</code> or <code>FALSE</code>.</p></dd>


<dt id="arg--skip-rjava-check">._skip_rjava_check<a class="anchor" aria-label="anchor" href="#arg--skip-rjava-check"></a></dt>
<dd><p>Internal. If TRUE, skip the rJava initialization check.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Logical. Returns <code>TRUE</code> invisibly on success. Prints status messages if <code>quiet</code> is set to <code>FALSE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="rjava-path-locking">rJava Path-Locking<a class="anchor" aria-label="anchor" href="#rjava-path-locking"></a></h2>


<p><strong>Important for <strong>rJava</strong> Users</strong>: This function sets environment variables
(JAVA_HOME, PATH) that affect both command-line Java tools and <strong>rJava</strong> initialization.
However, due to <strong>rJava</strong>'s path-locking behavior when <code><a href="https://rdrr.io/pkg/rJava/man/jinit.html" class="external-link">.jinit</a></code> is called
(see <a href="https://github.com/s-u/rJava/issues/25" class="external-link">https://github.com/s-u/rJava/issues/25</a>, <a href="https://github.com/s-u/rJava/issues/249" class="external-link">https://github.com/s-u/rJava/issues/249</a>, and <a href="https://github.com/s-u/rJava/issues/334" class="external-link">https://github.com/s-u/rJava/issues/334</a>),
this function must be called <strong>BEFORE</strong> <code><a href="https://rdrr.io/pkg/rJava/man/jinit.html" class="external-link">.jinit</a></code> is invoked. Once <code><a href="https://rdrr.io/pkg/rJava/man/jinit.html" class="external-link">.jinit</a></code>
initializes, the Java version is locked for that R session and cannot be changed without restarting R.</p>
<p><code><a href="https://rdrr.io/pkg/rJava/man/jinit.html" class="external-link">.jinit</a></code> is invoked (and Java locked) when you:</p><ul><li><p>Explicitly call <code><a href="http://www.rforge.net/rJava/" class="external-link">library(rJava)</a></code></p></li>
<li><p>Load any package that imports <strong>rJava</strong> (which auto-loads it as a dependency)</p></li>
<li><p>Even just use IDE autocomplete with <code>rJava::</code> (this triggers initialization!)</p></li>
<li><p>Call any <strong>rJava</strong>-dependent function</p></li>
</ul><p>Once any of these happen, the Java version used by <strong>rJava</strong> for that session is locked in.
For command-line Java tools that don't use <strong>rJava</strong>, this function can be called at any
time to switch Java versions for subsequent system calls.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set cache directory for Java to be in temporary directory</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>rJavaEnv.cache_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For end users: Install and set Java BEFORE loading rJava packages</span></span></span>
<span class="r-in"><span><span class="fu">use_java</span><span class="op">(</span><span class="fl">21</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">myRJavaPackage</span><span class="op">)</span>  <span class="co"># Now uses Java 21</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For command-line Java tools (no rJava involved):</span></span></span>
<span class="r-in"><span><span class="co"># Can switch versions between system calls</span></span></span>
<span class="r-in"><span><span class="fu">use_java</span><span class="op">(</span><span class="fl">8</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/system2.html" class="external-link">system2</a></span><span class="op">(</span><span class="st">"java"</span>, <span class="st">"-version"</span><span class="op">)</span>  <span class="co"># Shows Java 8</span></span></span>
<span class="r-in"><span><span class="fu">use_java</span><span class="op">(</span><span class="fl">17</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/system2.html" class="external-link">system2</a></span><span class="op">(</span><span class="st">"java"</span>, <span class="st">"-version"</span><span class="op">)</span>  <span class="co"># Shows Java 17</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># WARNING: Do NOT do this with rJava packages:</span></span></span>
<span class="r-in"><span><span class="co"># library(rJava)          # Initializes with system Java</span></span></span>
<span class="r-in"><span><span class="co"># use_java(21)            # Too late! rJava is already locked</span></span></span>
<span class="r-in"><span><span class="co"># rJava still uses the Java version from before use_java() call</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.ekotov.pro" class="external-link">Egor Kotov</a>, Chung-hong Chan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

